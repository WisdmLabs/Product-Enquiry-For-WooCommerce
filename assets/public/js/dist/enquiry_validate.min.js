jQuery(function(e){dialog=e("#contact-form").dialog({autoOpen:!1,height:"auto",maxHeight:570,width:"auto",dialogClass:"modal-enquiry-form",modal:!0,fluid:!0,resizable:!1,show:function(){e(this).fadeIn(300)},hide:function(){e(this).fadeOut(300)}}),e("#enquiry .contact.pe-show-enq-modal").click(function(e){e.preventDefault(),dialog.dialog("open")}),e("#cancel").click(function(){dialog.dialog("close")}),e("#send-btn").click(function(){jQuery.validator.addMethod("validatePhone",function(e,a){return"0"==e.trim().length||new RegExp("^[0-9(). -+]{1,20}$").test(e)}),e.validator.addMethod("email",function(e,a){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}),e("#enquiry-form").validate({errorElement:"div",rules:{wdm_customer_name:{required:!0},wdm_customer_email:{required:!0,email:!0},wdm_txtphone:{validatePhone:!0},wdm_enquiry:{required:!0,minlength:10},agree:"required"},messages:{wdm_customer_name:object_name.wdm_customer_name,wdm_customer_email:object_name.wdm_customer_email,wdm_txtphone:{required:object_name.wdm_txtphone_required,validatePhone:object_name.wdm_txtphone_invalid},wdm_enquiry:object_name.wdm_enquiry},errorPlacement:function(a,t){a.insertAfter(e(t))},submitHandler:function(a){var t=e("[name='wdm_customer_name']").val(),o=e("[name='wdm_customer_email']").val(),i=e("[name='wdm_txtphone']").val(),d=e("[name='wdm_subject']").val(),n=e("[name='wdm_enquiry']").val(),m=e("[name='cc']").is(":checked")?1:0,r=e("[name='wdm_product_name']").val(),l=window.location.href,u=e("[name='product_enquiry']").val(),c=e("#author_email").val(),s=e("[name='wdm_product_id']").val(),_=e("input.variation_id").val();dialog.dialog("close"),e("#loading").dialog({create:function(a,t){e(this).closest(".ui-dialog").find(".ui-dialog-titlebar").remove()},resizable:!1,width:"auto",height:"auto",modal:!0}),e.ajax({url:object_name.ajaxurl,type:"POST",data:{action:"wdm_send",security:u,wdm_name:t,wdm_emailid:o,wdm_subject:d,wdm_phone:i,wdm_enquiry:n,wdm_cc:m,wdm_product_name:r,wdm_product_url:l,uemail:c,wdm_product_id:s,wdm_variation_id:_},success:function(a){e("#send_mail").hide(),e("#loading").text(a),e("#loading").dialog("option","buttons",{OK:function(){e(this).dialog("close")}})}}),a.reset()}})}),e(".ui-dialog").addClass("wdm-enquiry-modal"),e("#enquiry-form").length&&jQuery(document).keyup(function(e){27===e.keyCode&&dialog.dialog("close")}),e("#enquiry-form, .ptl").focus(function(){e("#enquiry-form .ptl").each(function(){""==!e(this).val()?e(this).parents(".wdm-pef-form-row").addClass("focused"):e(this).parents(".wdm-pef-form-row").removeClass("focused")}),e(this).parents(".wdm-pef-form-row").addClass("focused")})});
